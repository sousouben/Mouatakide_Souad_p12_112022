<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: callApi.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: callApi.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { ActivityData } from "../classModel/classActivityData";
import { MainData } from "../classModel/ClassMainData";
import { AverageSessionsData } from "../classModel/classAverageSessionsData";
import { PerformanceData } from "../classModel/classPerformanceData";

const url = "http://localhost:3000/user";
console.log(url);

//Ce code définit une fonction appelée getData qui envoie une requête HTTP à une URL spécifiée par la variable url.
//La fonction prend deux arguments : id et categorie.

/**
 * [getData This code defines a function called getData that sends an HTTP request to a URL specified by the url variable.]
 *
 * @param   {number}  id
 * @param   {string}  categorie
 *
 * @return  {promise}             [return promise]
 */
const getData = async (id, categorie) => {
  let urlDemande = categorie ? url + `/${id}/${categorie}/` : url + `/${id}/`;
  console.log(urlDemande);

  const data = await fetch(urlDemande); //await est utilisé pour attendre la réponse du serveur avant de continuer.
  console.log(data);

  const dataFetch = await data.json(); //Une fois la réponse reçue, la fonction appelle la méthode json() sur l'objet de réponse pour analyser la réponse au format JSON, puis stocke le résultat dans la variable dataFetch.
  console.log(dataFetch);

  switch (
    categorie //switch pour déterminer le type d'objet de données à renvoyer, en fonction de la valeur de l'argument categorie.
  ) {
    case "activity":
      return new ActivityData(dataFetch.data); //la fonction renvoie un nouvel objet ActivityData
    case "average-sessions":
      return new AverageSessionsData(dataFetch.data); //la fonction renvoie un nouvel objet AverageSessionsData
    case "performance":
      return new PerformanceData(dataFetch.data); //la fonction renvoie un nouvel objet PerformanceData

    default:
      return new MainData(dataFetch.data); //Si aucune des instructions case ne correspond, la fonction renvoie un nouvel objet MainData.
  }
};

export default getData;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getData">getData</a></li><li><a href="global.html#getUserActivity">getUserActivity</a></li><li><a href="global.html#getUserAverageSessions">getUserAverageSessions</a></li><li><a href="global.html#getUserMainData">getUserMainData</a></li><li><a href="global.html#getUserPerformance">getUserPerformance</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Wed Dec 21 2022 10:48:26 GMT+0100 (heure normale d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
